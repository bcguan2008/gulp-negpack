/**
 * @overview:产品线搜索框自动补全组件
 *
 * @author: dongming.jidm	
 * @date: 2012-12-12
*/
!(function($){
	
	var Sandbox,
		self,
		configs = {
			type:'offer',
			container:'#header',
			end:0
		};
	
	function Suggestion(sb) {
		Sandbox = sb;
		return Suggestion;
	}
	
	$.extend(Suggestion,{
			init:function(cfg){

				self = this;
				self.config = $.extend(true, {}, configs, cfg);
				
				var keywords = $('input[name=keywords]', self.config.container);
				var searchKeywords = keywords.parent();
				keywords.bind('focus.suggestion', function(){
					$.use('web-suggestion', function(){
						suggestion = new FE.ui.Suggestion(keywords, {
							appendTo: searchKeywords,
							type: self.config.type,
							position: {
								my: 'left top',
								at: 'left bottom',
								offset: '-4 0'
							},
							widthfix: 8,
							hideNumber: true,
							suggestTracelogType:'sale_search',
							suggestTracelogShow:'sale_search_suggest_show',
							suggestTracelogSubmit:'sale_top_suggest_submit',
							onSelected: function(e, ui){
								$('button[type=submit]', self.config.container).click();
							}
						});
						keywords.unbind('focus.suggestion');
					});
				});
				
			},
			
			end:0
	});
	
	Qingguo.Business.Suggestion = Suggestion;
	AppCore.register("qingguo_mod_suggestion", Qingguo.Business.Suggestion);
	
})(jQuery);

