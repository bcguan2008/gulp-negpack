/**
 * @author dongming.jidm
 * @date 2013-01-07
 * trace related
 */

;(function($){
	var self,QU = Qingguo.Utility;

	function ClickMode(sb) {
		Sandbox = sb;
		return ClickMode;
	}

	$.extend(ClickMode,{
				
		init: function(){

			self = this;

			self.__p4pClick();
			self.__aliClick();
		},

		__p4pClick: function() {
			if(typeof offerUrls === 'undefined'){
				return ;
			}

			$("#content").unbind("click.p4pclick");

			$("#content").on("click.p4pclick", "a[oid]", function() {
				var oid = $(this).attr("oid").trim();
				if( oid !== '' ) {
					QU.p4pClick(offerUrls[0][oid]);
				} else { 
					return;
				}
			});
		},

		__aliClick: function() {
			$("body").unbind("mousedown.aliclick");

			$("body").on("mousedown.aliclick", "a[t]", function() {
				var trace = "?searchtrace="+$(this).attr("t");

				QU.aliclick(this, trace);
			});
		},


		end: 0
	});
	
	Qingguo.Business.ClickMode = ClickMode;
	
	AppCore.register("qingguo_mod_click", Qingguo.Business.ClickMode);


})(jQuery);