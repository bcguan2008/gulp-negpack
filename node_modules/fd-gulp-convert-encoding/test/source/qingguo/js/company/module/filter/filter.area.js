/**
 * 搜索高级筛选区js
 
 * @author terence.wangt
 * date:2012.03.12
 */
!(function($){
	
	var Sandbox,
		configs = {
			'formid':'frmFiltSearch',
            'id': 'sw_mod_filter_area',
			end:0
		};
	
	function FilterArea(sb) {
		Sandbox = sb;
		return FilterArea;
	}
	
	$.extend(FilterArea,{
				
			init:function(cfg){

				this.config = $.extend(true, {}, configs, cfg);
				
				this.form = $("#"+this.config.formid);
				
				this.init_filter_area();
			},
					
			init_filter_area: function(){
				var self=this,
					value=$('#'+this.config.id+ ' .Selected'),//当前select节点
					prov=this.form.find('input[name=province]'),//省份表单
					city=this.form.find('input[name=city]'),//城市表单
					cityTrace="",
					provinceTrace="";
					districtTrace="";
					
				var area = new Qingguo.Widget.Area({
				
					id:self.config.id,//地区容器的id
					value:value.html(),//当前值
					prov:prov.val(),//当前省
					city:city.val(),//当前城市
					onchange:function(){//执行onchange事件
					
						prov.val(this.prov);
						city.val(this.city);
						if (this.city) {
							cityTrace = "c";
						}
						if (this.prov) {
							provinceTrace = "p";
						}
						if(this.district){
							districtTrace = "d";
						}
						
						$('#J_submitBtn').click();
					}
				});
			},
			
			end:0
	});
	
	Qingguo.Business.FilterArea = FilterArea;
	
	//地区筛选模块，鼠标移动到地区筛选时加载
	AppCore.lazyRegister("qingguo_mod_filter_area", "Qingguo.Business.FilterArea",
		"#sw_mod_filter_area", 'mouseover',{
		module:{
			css:['http://style.c.aliimg.com/app/qingguo/css/module/filter/area.css'],
			js: ['http://style.c.aliimg.com/app/qingguo/js/module/filter/area.js']
		}
	});
//    AppCore.register("qingguo_mod_filter_area", Qingguo.Business.FilterArea);
				
	
})(jQuery);