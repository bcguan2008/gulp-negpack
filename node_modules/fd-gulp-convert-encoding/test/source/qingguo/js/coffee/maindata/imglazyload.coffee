###
main data area image lazyload
@author dongming.jidm
@date 2012-12-27
###

(($) ->
	defConfig = 
		lazyloadClass: "ul.offers"
		rootId: "#content"

	self = null

	Sandbox = null

	ImgLazyLoad = ( sb ) ->
		Sandbox = sb
		return ImgLazyLoad

	$.extend ImgLazyLoad, {
		init: ->
			self = this 
			self.doLazyLoad() 
			Sandbox.on Qingguo.Config.Events.imgLazyLoadInit, this.delayImgLazyLoad 
			return

		delayImgLazyLoad: ->
			self.doLazyLoad()
			return

		doLazyLoad: ->
			$.use 'web-datalazyload', () ->
				FE.util.datalazyload.register {
					containers: $(defConfig.lazyloadClass, defConfig.rootId)
				}
				return
			return

	}

	Qingguo.Business.ImgLazyLoad = ImgLazyLoad

	AppCore.register("qingguo_mod_imglazyload", Qingguo.Business.ImgLazyLoad)

	return

) jQuery