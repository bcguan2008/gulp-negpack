/**
 * 定义module的公用逻辑
 * 如beforeFilter, afterFilter, 权限检测等
 */
define('detail.lib.Module', 
		['exports', 'lang.Lang', 'context.WingModule'], 
function(exports, _, WingModule) {

// 使用默认Butterfly提供的WingModule进行页面组件化
_.extend(exports, WingModule);

var result = null;
exports.beforeAction = function(ad) {
    if (ad.info.url ==='detail/pages/index/view') {
        result = ad.result.data.result;
     } else {
        ad.result.data.result = ad.result.data.result || result;
        ad.result.data.mdetail = result;

        _.extend(ad.result.data, ad.result.data.result, ad.result.data.mdetail);
    }
}

});
